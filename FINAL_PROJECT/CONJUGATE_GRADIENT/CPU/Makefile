MPICC      := mpicc
CFLAGS  := -O3 -Wall -g
MPICPP     := mpic++
CFLAGS  := -O3 -Wall -g

BIN     := CONJUGATE_GRADIENT_SOLVER_MPI_BLAS CONJUGATE_GRADIENT_SOLVER_MPI_without_BLAS 
FILE_BLAS    := CONJUGATE_GRADIENT_SOLVER_MPI_BLAS.c
FILE_NO_BLAS := CONJUGATE_GRADIENT_SOLVER_MPI_without_BLAS.c
LIB     := -lm -lgslcblas -fopenmp

all: $(BIN)

CG_BLAS: CONJUGATE_GRADIENT_SOLVER_MPI_BLAS
CONJUGATE_GRADIENT_SOLVER_MPI_BLAS: CONJUGATE_GRADIENT_SOLVER_MPI_BLAS.c
	$(MPICC) -o CONJUGATE_GRADIENT_SOLVER_MPI_BLAS $(CFLAGS) $(FILE_BLAS) $(LIB)

CG_NO_BLAS: CONJUGATE_GRADIENT_SOLVER_MPI_without_BLAS
CONJUGATE_GRADIENT_SOLVER_MPI_without_BLAS: CONJUGATE_GRADIENT_SOLVER_MPI_without_BLAS.c
	$(MPICC) -o CONJUGATE_GRADIENT_SOLVER_MPI_without_BLAS $(CFLAGS) $(FILE_NO_BLAS) $(LIB)

clean:
	rm -f $(BIN) 
